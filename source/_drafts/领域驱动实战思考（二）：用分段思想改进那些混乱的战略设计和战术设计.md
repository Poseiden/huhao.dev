---
title: 领域驱动实战思考（二）：用分段思想改进那些混乱的战略设计和战术设计
categories:
  - Domain Driven Development
tags:
  - DDD
abbrlink: 58fe0824
---

## 前言

2019年，在我[对DDD进行基准化](https://huhao.dev/posts/130bb570/)的过程中，遇到过非常多的挑战，其中一个便是：

**DDD的设计过程，到底应该分为多少个阶段？每个阶段做什么事情？**

这个困惑来自于书本上，以及其他咨询师在咨询过程中对于DDD设计和操作的差异：

- 有的人会从电梯演讲和用户地图开始做设计和分析；
- 有的人会从事件风暴开始做设计和分析；
- 有的人会从子域开始做设计和分析；
- 有的人会从限界上下文开始做设计和分析；
- 有的人会直接从领域建模的聚合、实体、值对象开始做设计和分析；
- 当然，还有的人会使用“名词动词法”直接从用例描述开始做设计和分析。

对于实际的学习者和使用者来说，这种混乱的操作手法所形成的不一致和不流畅体验，对于坚持进行DDD设计和减少吵架来说，简直是一种毁灭性的影响。

在这个过程中，最让我感触深刻的，是在于大家在落地DDD的时候，使用了大量具有“二义性”的词汇，讽刺的是，这与DDD所强调的统一语言是背道而驰的。

其中对于上述混乱影响最大的因素之一，就是大家对于DDD的“战略设计”和“战术设计”认知不一致（甚至说是混沌）的问题。

所以，这篇文章，就是围绕这两个概念，来说一说我是如何在基准化的过程中解决这个问题，统一并形成较为流畅的分段式的设计过程的。

<!-- more -->

## 混乱的战略设计和战术设计

一谈起“战略设计”和“战术设计”，你一定会听到“问题域”、“方案域”、“实现域”等名词。

我的同事肖然，在经过反复理解和提炼之后，曾经提出过一个用于解释“问题与方案”，“战略与战术”的“元模型”：

{% asset_img DDD-Essence.png 500 "从问题/解决方案和战略/战术维度分析DDD元模型的元素" %}

这个模型其实对于具备多维思维和对DDD有着深入理解的人来说，是一种不错的可视化辅助理解手段（划分的合理性仅供参考）。但是在成为更多的咨询师做DDD咨询或培训时开篇必用的材料之后，事情就变得诡异了。因为这个元模型对于咨询师或者培训师是一个比较好的记忆工具，而不是用来给别人解释的适合的工具。

当没有意识到这一点的人在使用这个模型给客户解释的时候，会向客户描述成：“问题域的战略设计”、“问题域的战术设计”、“解决方案域的战略设计”以及“解决方案的战术设计”。

经过实战证明，这种方式不到1分钟，就能让客户及对DDD理论没有深入了解的人晕菜，屡试不爽。

在搞清楚这个问题之前，我们先要追本溯源，看看这些概念是从哪里来的。

### 它们是从哪儿来的？

#### 问题域 / 方案域 / 实现域

什么是问题域？什么是方案域？什么是实现域？

我在做咨询的时候总是会用一个屡试不爽的小测试来给大家解释，就是：

> 我：“我饿了。”

然后，我会让大家根据这个问题来接一句话去将对话接下去，这时候很多人会这样说：

> 客户A：“你吃什么？”
> 客户B：“走，一起吃饭去？”
> 客户C：“你想什么时候吃？”
> ……

以上就是绝大多数人所习惯的基于方案而非问题进行回答的方式。

一个更正确的体现问题驱动的答法应该是：

> 某善于问题驱动的客户：“你为什么饿了？”

这时候，接下来我的回答有可能是：

> 我：“我中午加班开会，时间比较紧，下午还要来给大家做工作坊，所以中午没吃饭，现在感觉有些低血糖。”

最后，得到的答案往往就会跟之前有很大不同：

> 客户A：“要不要我给你找点吃的你先垫一垫？”
> 客户B：“要不我们先暂停工作坊你去吃点东西？”
> ……

在这个例子中，三个域分别是：

- 问题域：为什么饿了
- 方案域：先垫一垫 or 暂停工作坊去吃东西
- 实现域：先吃块儿巧克力 or 去外面吃快餐

#### 战略设计 / 战术设计

### 为什么大多数人会难以理解？

#### 绝大多数人并不善于多维思考

## 更合理的“DDD分段式设计”

### 战略设计

#### 事件风暴工作坊

#### 限界上下文分析

#### 子域分析

#### 弹性边界分析

### 战术设计

#### 领域建模

#### 业务服务识别

#### 业务服务接口能力识别

### 技术实现

## 在基准化过程中的实际效果

---

## 参考资料

- [用TDD思想对DDD的协作设计过程进行基准化](https://huhao.dev/posts/130bb570/)
- [当Subdomain遇见Bounded Context](https://insights.thoughtworks.cn/subdomain-and-bounded-context/)