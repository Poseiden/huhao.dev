---
title: DDD实战思考（一）：用TDD思想对DDD的协作设计过程进行基准化
date: 2019-12-21 16:30:28
categories:
- Domain Driven Development
tags:
- DDD
- TDD
---

## 背景

在这一年聚焦DDD设计，尤其是DDD的协作设计工作坊的咨询工作中，我发现很多客户总是反馈说咨询师的方法论太模糊且落不了地。而绝大多数咨询师则认为其实方法已经说的很清楚了，觉得是客户的人懒，不想干。

而在客户要求提供标准化输出件、操作手册或方法论指南的时候，咨询师们大多都会果断拒绝，而且还觉得这违背了敏捷宣言中“可工作的软件胜过面面俱到的文档”的价值观。

但我发现其实根本不是这么一回事儿，真正的原因是绝大多数咨询师就没有投入足够的研究，去清晰定义自己所售卖的方法论中到底需要多少个阶段，也没有清晰定义每个阶段的输入输出，以及输入和输出之间到底是怎么一步一步清晰且可复用的推演过去的。

而当客户为此挑战咨询师时，他们则大多会用一句“By Experience”敷衍过去，其实背后是自己根本解释不清楚。

结合我过去在ThoughtWorks近4年的人员培养和现场教学经验，我观察到客户当听到咨询师模糊的解释时，他们面部不解和懵逼的反应，以及后续提出的希望进一步细化和澄清的要求，和在进行人员培养和授课时的情景是非常相似的。

所以基于我的经验，唯一的解决方案是我们必须要给出方法论清晰的操作步骤和易于理解的解释。

## 我的基准化思维框架

通过仔细的思考和观察，通过利用了概念性思考，我发现协作设计工作坊的过程，非常类似于我们的计算机程序模型：

> **输入 → 处理 → 输出**

客户所希望得到的标准化输出件，其实相当于计算机程序模型中的“输入”和“输出”，而推导和产出两个标准化输出件中的具体步骤，则相当于计算机程序模型中的“处理”过程，即可以视作：

> **前一个过程的输出件 → 操作步骤 → 该环节的输出件**

那如果是这样子的话，我就可以采用对待程序的方式，通过测试驱动开发（TDD）的思想来进行方法论的基准化操作了！

于是我就做了！

## 利用TDD的方式进行DDD设计过程的基准化

在这一年，通过大大小小十数个咨询项目，我使用了以下过程进行了基准化：

* 第一步，我通过在不同客户项目的实践中打磨和定义了每个阶段清晰的输出件，产出了《DDD工作坊准入条件和产出物图例》。这一步就相当于通过Tasking确定程序的输入和输出，以及定义测试驱动开发中的测试用例。
* 第二步，在确定了输入输出后，我继续通过不同项目的不断打磨，基准化了每一个阶段的操作步骤，并把每一步细化到概念介绍、操作步骤、过程图例、要点提示四个部分，产出了《DDD工作坊操作手册》。这一步就相当于通过测试驱动的方式，进行了程序“处理”过程的实现，并且还通过小步迭代的方式，对操作过程进行了一遍又一遍的迭代。
* 第三步，在整个操作手册完成之后，基于操作手册，重新梳理抽象出了适配这个操作手册的最简单和通常的概念，并从整个宏观上优化和定义了新的DDD分段式设计（战略设计阶段、战术设计阶段、技术实现阶段），解决了之前所有我所参与过的DDD培训所看到的知识体系凌乱，不统一，不顺畅等问题，让概念讲解部分最小化，产出了《DDD工作坊概念讲解》课件。这一步就相当于程序设计和开发过程中，通过高度抽象，进行分层架构并实现架构演进的过程。
* 第四步，通过项目开发实践和进一步总结，结合多种以领域为核心的分层架构思想，不断打磨形成了适配整个基准化DDD的[基准化代码样例](https://github.com/howiehu/ddd-architecture-samples)。实现了代码化落地。
* 第五步，继续通过不断的实践、打磨和总结，产出《DDD成熟度评估标准》。

以上全部环节，充分采用和实现了我们对待程序设计所提倡的“简单设计（增量式设计）”思想，不带入任何冗余，以便能够让其他人快速理解和复用。

## 结果

基准化的领域驱动设计产出物如下：

- [《DDD工作坊准入条件和产出物图例》](https://pan.baidu.com/s/10eVNdJ0kN5dPZX1On7V5bg)（提取码: 9jza）
- [《DDD工作坊操作手册》](https://pan.baidu.com/s/16zP-QFuljJqQeE4PWovG4g)（提取码: uu1d）
- [《DDD工作坊概念讲解》](https://pan.baidu.com/s/1PnXfqr1RsGG-z9QXTGY4Uw)（提取码: b4ft）
- [DDD基准化代码结构样例](https://github.com/howiehu/ddd-architecture-samples)
- 《DDD成熟度评估标准》(还在完善中，请期待)

对于这些基准化的产出，我已经通过带领7个新咨询师进行了可复用性的验证，这些新咨询师只需要通过我讲解或示范一遍，就能够独立承担后续的DDD设计咨询工作，并且还能够实现概念和手法的一致性。

至于“By Experience”，则只剩操作者个人经验的高低，和智商的天花板了。